"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[889],{6889:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"myHome"},[t("div",{staticStyle:{display:"flex","flex-direction":"column",height:"80vh",padding:"20px"}},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{path:""}}},[t("span",{staticStyle:{color:"white"}},[e._v("资源管理")])]),t("el-breadcrumb-item",[t("span",{staticStyle:{color:"white"}},[e._v("上传公共服务资源")])])],1),t("div",{staticStyle:{"padding-top":"0px"}},[t("el-upload",{ref:"upload",staticStyle:{display:"inline-block",float:"left"},attrs:{action:"#","show-file-list":!0,"before-upload":e.checkPackageFile,disabled:!1,"auto-upload":!1,"on-preview":e.handlePreview,"on-success":e.handle_success,accept:".zip","http-request":e.handleFileUpload,"on-change":e.handleChange,"on-remove":e.handleRemove,limit:"1"}},[t("el-button",{staticStyle:{"margin-top":"20px"},attrs:{slot:"trigger",size:"small",type:"info"},slot:"trigger"},[e._v("选取文件")]),t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("推送至服务器")])],1)],1),t("br"),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.maskDialogVisible,expression:"maskDialogVisible"}],staticStyle:{"background-color":"rgba(204,204,204,0)","padding-top":"0px","flex-grow":"1"},attrs:{"element-loading-text":"尝试解析资源包......","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.7)"}},[e.infoDivVisible?t("div",{staticStyle:{"background-color":"#0D283F","padding-top":"10px",height:"100%"}},[e._m(0),t("div",{staticStyle:{"text-align":"left",color:"white","padding-left":"10px","font-size":"larger"}},[t("span",{staticStyle:{"padding-right":"20px"}},[e._v("资源包名:")]),t("span",{staticStyle:{"font-weight":"bold","padding-right":"10px",color:"#00FFA8","font-size":"larger"}},[e._v(e._s(this.packageDetailInfo.connectedPackageOriginalFileName))])]),t("div",{staticStyle:{"text-align":"left",color:"white","padding-left":"10px","font-size":"larger"}},[t("span",{staticStyle:{"padding-right":"20px"}},[e._v("资源包大小:")]),t("span",{staticStyle:{"font-weight":"bold","padding-right":"10px",color:"#00FFA8","font-size":"larger"}},[e._v(e._s(this.packageDetailInfo.connectedPackageSize))])]),t("div",{staticStyle:{"text-align":"left",color:"white","padding-left":"10px","font-size":"larger"}},[t("span",{staticStyle:{"padding-right":"20px"}},[e._v("服务中文名:")]),t("span",{staticStyle:{"font-weight":"bold","padding-right":"10px",color:"#00FFA8","font-size":"larger"}},[e._v(e._s(this.packageDetailInfo.softwareCnName))])]),t("div",{staticStyle:{"text-align":"left",color:"white","padding-left":"10px","font-size":"larger"}},[t("span",{staticStyle:{"padding-right":"20px"}},[e._v("运行环境:")]),t("span",{staticStyle:{"font-weight":"bold","padding-right":"10px",color:"#00FFA8","font-size":"larger"}},[e._v(e._s(this.packageDetailInfo.softwareEnvironment))])]),t("div",{staticStyle:{"text-align":"left",color:"white","padding-left":"10px","font-size":"larger"}},[t("span",{staticStyle:{"padding-right":"20px"}},[e._v("服务版本号:")]),t("span",{staticStyle:{"font-weight":"bold","padding-right":"10px",color:"#00FFA8","font-size":"larger"}},[e._v(e._s(this.packageDetailInfo.softwareVersion))])]),t("div",{staticStyle:{"text-align":"left",color:"white","padding-left":"10px","font-size":"larger"}},[t("span",{staticStyle:{"padding-right":"20px"}},[e._v("服务唯一标识:")]),t("span",{staticStyle:{"font-weight":"bold","padding-right":"10px",color:"#00FFA8","font-size":"larger"}},[e._v(e._s(this.packageDetailInfo.softwareUniqueName))])]),t("div",{staticStyle:{"text-align":"left",color:"white","padding-left":"10px","font-size":"larger"}},[t("span",{staticStyle:{"padding-right":"20px"}},[e._v("容器服务CPU需求(cpuRequests):")]),t("span",{staticStyle:{"font-weight":"bold","padding-right":"10px",color:"#00FFA8","font-size":"larger"}},[e._v(e._s(this.packageDetailInfo.cpuRequests))])]),t("div",{staticStyle:{"text-align":"left",color:"white","padding-left":"10px","font-size":"larger"}},[t("span",{staticStyle:{"padding-right":"20px"}},[e._v("容器服务内存需求(memoryRequests):")]),t("span",{staticStyle:{"font-weight":"bold","padding-right":"10px",color:"#00FFA8","font-size":"larger"}},[e._v(e._s(this.packageDetailInfo.memoryRequests))])]),t("div",{staticStyle:{"text-align":"left",color:"white","padding-left":"10px","font-size":"larger"}},[t("span",{staticStyle:{"padding-right":"20px"}},[e._v("服务开发者:")]),t("span",{staticStyle:{"font-weight":"bold","padding-right":"10px",color:"#00FFA8","font-size":"larger"}},[e._v(e._s(this.packageDetailInfo.developerName))])]),t("div",{staticStyle:{"text-align":"left",color:"white","padding-left":"10px","font-size":"larger"}},[t("span",{staticStyle:{"padding-right":"20px"}},[e._v("服务开发单位:")]),t("span",{staticStyle:{"font-weight":"bold","padding-right":"10px",color:"#00FFA8","font-size":"larger"}},[e._v(e._s(this.packageDetailInfo.developerGroup))])]),t("div",{staticStyle:{"text-align":"left",color:"white","padding-left":"10px","font-size":"larger"}},[t("span",{staticStyle:{"padding-right":"20px"}},[e._v("联系方式:")]),t("span",{staticStyle:{"font-weight":"bold","padding-right":"10px",color:"#00FFA8","font-size":"larger"}},[e._v(e._s(this.packageDetailInfo.developerPhone))])]),t("br"),t("el-button",{attrs:{type:"success"},on:{click:e.confirmPackage}},[e._v("确认提交")]),t("el-button",{attrs:{type:"warning"},on:{click:e.cancelPackage}},[e._v("取消提交")])],1):e._e()])],1)])},s=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"text-align":"left",color:"white","padding-left":"10px","font-size":"larger"}},[t("span",{staticStyle:{"padding-right":"20px"}},[e._v("资源包解析结果:")])])}],l=(a(5306),{name:"UploadNewPackage",data(){return{dialogImageUrl:"",dialogVisible:!1,disabled:!1,fileList:[],maskDialogVisible:!1,packageDetailInfo:"",user:window.sessionStorage.getItem("userAccount"),infoDivVisible:!1,confirmButtonVisible:!1,cancelButtonVisible:!1}},methods:{handleRemove(e,t){this.packageDetailInfo="",this.$message.info("文件已移除，请重新选取")},handleChange(e,t){this.fileList=t},async submitUpload(){if(0==this.fileList.length)this.$message.warning("没有检测到选取文件，请检查。");else{const e=new FormData;this.fileList.forEach((t=>{e.append("files",t.raw)}));const t={headers:{"Content-Type":"multipart/form-data"}};this.maskDialogVisible=!0,await this.request.post("/Package/uploadSingle",e,t).then((e=>{"200"===e.code?(this.packageDetailInfo=e.data,this.$message.success("上传成功"),this.infoDivVisible=!0):this.$message.error("上传失败,原因:"+e.msg)})),this.maskDialogVisible=!1}},confirmPackage(){this.request.post("/Package/confirmUploadSingle",{params:{operator:this.user,servicePackageDetailInfoId:this.packageDetailInfo.servicePackageDetailInfoId}}).then((e=>{"200"===e.code&&(this.$message.success("提交资源包成功，可在我的资源内查看相关情况"),this.packageDetailInfo="",this.$refs.upload.clearFiles())}))},cancelPackage(){this.request.post("/Package/cancelUploadSingle",{params:{operator:this.user,servicePackageDetailInfoId:this.packageDetailInfo.servicePackageDetailInfoId}}).then((e=>{"200"===e.code?(this.$message.success("资源包提交已取消"),this.packageDetailInfo="",this.$refs.upload.clearFiles()):this.$message.error("系统错误")}))},handleFileUpload(){},checkPackageFile(e){var t=e.name.replace(/.+\./,"");if(-1===["zip"].indexOf(t.toLowerCase()))return this.$message({type:"warning",message:"目前只支持zip格式的服务包封装文件"}),!1},handlePreview(e){console.log(e)},handle_success(e){this.$message.success("文件已上传")}}}),n=l,o=a(3736),r=(0,o.Z)(n,i,s,!1,null,"cd4cbc3e",null),c=r.exports}}]);
//# sourceMappingURL=889.7e02a9bd.js.map