{"version":3,"file":"js/20.9051bcb3.js","mappings":"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","sources":["webpack://vue/./src/views/UploadPublicDataTemp.vue","webpack://vue/src/views/UploadPublicDataTemp.vue","webpack://vue/./src/views/UploadPublicDataTemp.vue?f970","webpack://vue/./src/views/UploadPublicDataTemp.vue?6349"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"height\":\"80vh\"}},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',[_c('b',[_vm._v(\"资源管理\")])]),_c('el-breadcrumb-item',[_vm._v(\"测试用-上传公共数据包\")])],1),_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticStyle:{\"padding-top\":\"0px\",\"padding-left\":\"20px\",\"float\":\"left\"}},[_c('el-upload',{ref:\"upload\",staticStyle:{\"display\":\"inline-block\",\"float\":\"left\"},attrs:{\"action\":\"#\",\"show-file-list\":true,\"before-upload\":_vm.checkImageFile,\"disabled\":false,\"auto-upload\":false,\"on-preview\":_vm.handlePreview,\"on-success\":_vm.handle_success,\"http-request\":_vm.handleFileUpload,\"on-change\":_vm.handleChange,\"on-remove\":_vm.handleRemove,\"limit\":\"1\"}},[_c('el-button',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"slot\":\"trigger\",\"size\":\"small\",\"type\":\"warning\"},slot:\"trigger\"},[_vm._v(\"选取测试数据包\")]),_c('el-button',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":_vm.submitUpload}},[_vm._v(\"确认\")])],1)],1),(_vm.ifUploadPlugInFiles)?_c('div',{staticStyle:{\"float\":\"left\",\"padding-left\":\"20px\",\"padding-top\":\"14px\"}},[_c('i',{staticClass:\"el-icon-success\",staticStyle:{\"color\":\"green\",\"font-size\":\"40px\"}})]):_vm._e()])],1),_c('el-row',{staticStyle:{\"padding-top\":\"20px\",\"padding-left\":\"20px\"}},[_c('el-col',{attrs:{\"span\":4}},[_c('el-input',{attrs:{\"placeholder\":\"请输入数据名\"},model:{value:(_vm.fileName),callback:function ($$v) {_vm.fileName=$$v},expression:\"fileName\"}})],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-input',{attrs:{\"placeholder\":\"请输入数据描述\"},model:{value:(_vm.fileNote),callback:function ($$v) {_vm.fileNote=$$v},expression:\"fileNote\"}})],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-input',{attrs:{\"placeholder\":\"请输入数据类型\"},model:{value:(_vm.fileType),callback:function ($$v) {_vm.fileType=$$v},expression:\"fileType\"}})],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-input',{attrs:{\"placeholder\":\"请输入数据版本\"},model:{value:(_vm.fileVersion),callback:function ($$v) {_vm.fileVersion=$$v},expression:\"fileVersion\"}})],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.uploadFunction}},[_vm._v(\"确定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div style=\"display: flex;flex-direction: column;height: 80vh\">\r\n    <!--面包屑 2022年10月28日 16点28分 临时写一个上传数据资源的口子-->\r\n\r\n    <el-breadcrumb separator=\"/\">\r\n      <el-breadcrumb-item><b>资源管理</b></el-breadcrumb-item>\r\n      <el-breadcrumb-item>测试用-上传公共数据包</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <el-row>\r\n      <el-col :span=\"8\">\r\n        <div style=\"padding-top: 0px;padding-left: 20px;float: left\">\r\n          <el-upload action=\"#\"\r\n                     :show-file-list=\"true\"\r\n                     ref=\"upload\"\r\n                     :before-upload=\"checkImageFile\"\r\n                     :disabled=\"false\"\r\n                     :auto-upload=\"false\"\r\n                     style=\"display: inline-block;float: left\"\r\n                     :on-preview=\"handlePreview\"\r\n                     :on-success=\"handle_success\"\r\n                     :http-request=\"handleFileUpload\"\r\n                     :on-change=\"handleChange\"\r\n                     :on-remove=\"handleRemove\"\r\n                     limit=\"1\"\r\n          >\r\n            <el-button slot=\"trigger\" size=\"small\" type=\"warning\" style=\"margin-top: 20px \">选取测试数据包</el-button>\r\n            <el-button size=\"small\" style=\"margin-left: 20px\" type=\"success\" @click=\"submitUpload\">确认</el-button>\r\n          </el-upload>\r\n        </div>\r\n        <div style=\"float: left;padding-left: 20px;padding-top: 14px\" v-if=\"ifUploadPlugInFiles\">\r\n          <i class=\"el-icon-success\" style=\"color: green;font-size: 40px\"></i>\r\n        </div>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row style=\"padding-top: 20px;padding-left: 20px\">\r\n      <el-col :span=\"4\">\r\n        <el-input v-model=\"fileName\" placeholder=\"请输入数据名\"></el-input>\r\n      </el-col>\r\n      <el-col :span=\"4\">\r\n        <el-input v-model=\"fileNote\" placeholder=\"请输入数据描述\"></el-input>\r\n      </el-col>\r\n      <el-col :span=\"4\">\r\n        <el-input v-model=\"fileType\" placeholder=\"请输入数据类型\"></el-input>\r\n      </el-col>\r\n      <el-col :span=\"4\">\r\n        <el-input v-model=\"fileVersion\" placeholder=\"请输入数据版本\"></el-input>\r\n      </el-col>\r\n      <el-col :span=\"4\">\r\n        <el-button type=\"primary\" @click=\"uploadFunction\">确定</el-button>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"UploadPublicDataTemp\",\r\n\r\n  data() {\r\n\r\n    return {\r\n      // 测试文件包列表\r\n      fileList: [],\r\n\r\n      fileUid: '',\r\n      ifUploadPlugInFiles: false,\r\n\r\n      fileName: '',\r\n\r\n      fileNote: '',\r\n\r\n      fileType: '',\r\n\r\n      fileVersion:'',\r\n\r\n    }\r\n\r\n\r\n  },\r\n\r\n  methods: {\r\n    checkImageFile(file) {\r\n      // 数据包格式，不限制了\r\n      // var FileExt = file.name.replace(/.+\\./, \"\");\r\n      // if (['zip'].indexOf(FileExt.toLowerCase()) === -1) {\r\n      //   this.$message({\r\n      //     type: 'warning',\r\n      //     message: '目前只支持zip格式'\r\n      //   });\r\n      //   return false;\r\n      // }\r\n    },\r\n    handlePreview(file) {\r\n      console.log(file);\r\n    },\r\n    handleRemove(file, fileList) {\r\n      // 增加一个，把packageDetailInfo重置清空掉\r\n      this.packageDetailInfo = '';\r\n      this.$message.info(\"文件已移除，请重新选取\");\r\n    },\r\n\r\n    handle_success(res) {\r\n      // 这个上传success的钩子函数也是说name暂时没有用，给前端页面暂存的只有UUid\r\n      this.$message.success(\"文件已上传\");\r\n    },\r\n    handleFileUpload() {\r\n    },\r\n    handleChange(file, fileList) {\r\n      this.fileList = fileList;\r\n    },\r\n    handleRemoveWorkLoadYaml(file, fileList) {\r\n      // 这里要清空一下前端保存的文件UID\r\n      this.$message.info(\"文件已移除，请重新选取\");\r\n    },\r\n    async submitUpload() {\r\n\r\n      // 检查一下，文件列表为空别给后端发请求\r\n      if (this.fileList.length == 0) {\r\n        this.$message.warning(\"没有检测到选取文件，请检查。\");\r\n      } else {\r\n        const formData = new FormData();\r\n        this.fileList.forEach(item => {\r\n          formData.append(\"files\", item.raw)\r\n        })\r\n        const config = {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\"\r\n          }\r\n        };\r\n        this.maskDialogVisible = true;\r\n        // 开发环境\r\n        await this.request.post(\"/publicData/uploadPublicData\", formData, config).then(res => {\r\n          if (res.code === \"200\") {\r\n            this.fileUid = res.data;\r\n            this.ifUploadPlugInFiles = true;\r\n            this.$message.success(\"上传成功\")\r\n          } else {\r\n            this.$message.error(\"上传失败,原因:\" + res.msg)\r\n\r\n          }\r\n        })\r\n        // 部署环境\r\n        // this.request.post(\"/Package/uploadSingle\", formData,config).then(res => {\r\n        //   if (res.code === \"200\") {\r\n        //     this.$message.success(\"上传成功\")\r\n        //   } else {\r\n        //     this.$message.error(\"上传失败\")\r\n        //   }\r\n        // })\r\n\r\n      }\r\n    },\r\n\r\n    uploadFunction() {\r\n      if (this.fileName === '') {\r\n        this.$message.warning(\"没有填公共数据包名\");\r\n      } else if (this.fileNote === '') {\r\n        this.$message.warning(\"没有填公共数据描述\");\r\n      } else if (this.fileUid === '') {\r\n        this.$message.warning(\"没有上传数据包\");\r\n      } else if (this.fileType === '') {\r\n        this.$message.warning(\"没有数据类型\");\r\n      } else if (this.fileVersion === '') {\r\n        this.$message.warning(\"没有数据版本\");\r\n      } else {\r\n        this.request.post(\"/publicData/postPublicData\", {\r\n          params:{\r\n            publicDataUid:this.fileUid,\r\n            publicDataName:this.fileName,\r\n            publicDataNote:this.fileNote,\r\n            publicDataType:this.fileType,\r\n            publicDataVersion:this.fileVersion,\r\n          }\r\n        }).then(res => {\r\n          if (res.code === '200') {\r\n            this.$message.success(\"测试数据包得到确认\");\r\n          } else {\r\n            this.$message.error(\"系统异常\");\r\n          }\r\n        })\r\n      }\r\n    },\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UploadPublicDataTemp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UploadPublicDataTemp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadPublicDataTemp.vue?vue&type=template&id=38f4a514&scoped=true&\"\nimport script from \"./UploadPublicDataTemp.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadPublicDataTemp.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38f4a514\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticStyle","attrs","_v","ref","checkImageFile","handlePreview","handle_success","handleFileUpload","handleChange","handleRemove","slot","on","submitUpload","ifUploadPlugInFiles","staticClass","_e","model","value","fileName","callback","$$v","expression","fileNote","fileType","fileVersion","uploadFunction","staticRenderFns","name","data","fileList","fileUid","methods","console","handleRemoveWorkLoadYaml","formData","headers","params","publicDataUid","publicDataName","publicDataNote","publicDataType","publicDataVersion","then","res","component"],"sourceRoot":""}